# Notion 同步指南

## 📋 概述

本项目已设置Notion数据库来备份和管理所有工作内容，包括：
- 📚 题目数据库
- 🎵 音频文件数据库  
- 📝 工作日志
- 🔧 功能模块

## 🔗 Notion页面位置

主页面：https://www.notion.so/3055eb7be7e480a19e19fd360181d918

## 📊 数据库结构

### 1. 📚 题目数据库 (Questions Database)

**用途**：存储所有TOEFL练习题目

**字段**：
- `题目ID` (Title) - 唯一标识符，如 "A01-01"
- `题型` (Select) - Listen and Choose a Response / Listen to a Conversation / Listen to an Announcement 等
- `Set编号` (Text) - 如 "A01", "R01"
- `难度` (Select) - Easy / Medium / Hard
- `主题` (Multi-select) - Campus / Academic / Social / Service 等
- `状态` (Select) - 已完成 / 待审核 / 待修改 / 计划中
- `音频文件` (URL) - 音频文件链接
- `创建日期` / `最后更新` (自动)

**使用场景**：
- 老师们review题目内容
- 跟踪题目完成状态
- 按题型、难度、主题筛选

### 2. 🎵 音频文件数据库 (Audio Files Database)

**用途**：记录所有生成的音频文件

**字段**：
- `文件名` (Title) - 如 "LA-A01-01.mp3"
- `文件路径` (Text) - 相对路径
- `关联题目` (Text) - 对应的题目ID
- `题型` (Select) - 题目类型
- `文件大小` (Number) - KB
- `状态` (Select) - 已生成 / 待生成 / 生成失败
- `生成日期` (自动)

**使用场景**：
- 检查音频文件是否都已生成
- 查找缺失的音频文件
- 管理音频资源

### 3. 📝 工作日志 (Work Log)

**用途**：记录每日工作内容

**字段**：
- `工作内容` (Title) - 工作描述
- `日期` (Date) - 工作日期
- `功能模块` (Multi-select) - 涉及的功能模块
- `状态` (Select) - 进行中 / 已完成 / 待处理 / 已暂停
- `优先级` (Select) - 高 / 中 / 低
- `完成度` (Number) - 百分比

**使用场景**：
- 记录每日工作进展
- 跟踪项目进度
- 回顾历史工作

### 4. 🔧 功能模块 (Features)

**用途**：记录各个功能模块的开发状态

**字段**：
- `功能名称` (Title) - 如 "Listen to an Announcement"
- `文件路径` (Text) - HTML文件路径
- `状态` (Select) - 已完成 / 开发中 / 计划中 / 待测试
- `题目数量` (Number) - 该模块的题目总数
- `音频数量` (Number) - 该模块的音频文件数
- `最后更新` (自动)

**使用场景**：
- 查看各功能模块完成情况
- 了解项目整体进度

## 🚀 使用方法

### 方法1：手动添加（推荐用于review）

1. 打开对应的数据库
2. 点击 "New" 创建新条目
3. 填写各个字段
4. 在页面内容区域可以添加详细的题目内容、选项、答案等

### 方法2：自动同步（推荐用于批量导入）

使用 `scripts/sync-to-notion.py` 脚本：

```bash
# 1. 安装依赖
pip install notion-client

# 2. 设置Notion API Key
# 在 .env 文件中添加：
# NOTION_API_KEY=your_notion_integration_token

# 3. 运行同步脚本
python3 scripts/sync-to-notion.py
```

**获取Notion API Key**：
1. 访问 https://www.notion.so/my-integrations
2. 创建新的integration
3. 复制API token
4. 在Notion页面中，点击右上角 "..." → "Connections" → 添加你的integration

### 方法3：在Notion中直接编辑HTML内容

对于需要详细review的题目，可以在Notion页面中添加：
- 题目完整文本
- 所有选项
- 正确答案
- 解释说明
- 音频播放链接

## 📝 工作流程建议

### 每日工作流程

1. **开始工作时**：
   - 在工作日志中创建新条目
   - 记录今天计划完成的任务

2. **完成题目后**：
   - 在题目数据库中添加新题目
   - 填写所有字段（题型、难度、主题等）
   - 在页面内容中添加完整题目内容

3. **生成音频后**：
   - 在音频文件数据库中添加条目
   - 关联对应的题目ID

4. **完成功能模块后**：
   - 更新功能模块数据库
   - 更新题目数量和音频数量

5. **结束工作时**：
   - 更新工作日志状态
   - 记录完成度和遇到的问题

### Review流程

1. **老师review题目**：
   - 在题目数据库中筛选 "待审核" 状态
   - 查看题目内容
   - 如需修改，将状态改为 "待修改"
   - 审核通过后改为 "已完成"

2. **检查音频**：
   - 在音频文件数据库中查看 "待生成" 或 "生成失败" 的文件
   - 重新生成后更新状态

## 🔄 同步策略

### 实时同步（推荐）
- 每次完成题目后立即添加到Notion
- 每次生成音频后立即记录

### 批量同步
- 每天结束时运行同步脚本
- 批量导入当天完成的所有内容

## 📌 注意事项

1. **题目ID格式**：
   - 公告：`A01-01`, `A01-02`...
   - 选择回应：`R01-01`, `R02-01`...
   - 对话：`C01-01`...

2. **音频文件命名**：
   - 公告：`LA-A01-01.mp3`
   - 选择回应：`LCR-R01-01.mp3`
   - 对话：`LC-C01-01.mp3`

3. **状态管理**：
   - 新题目：状态设为 "待审核"
   - 老师审核通过：改为 "已完成"
   - 需要修改：改为 "待修改"

## 🛠️ 扩展功能

未来可以添加：
- 自动从HTML文件提取题目并同步
- 音频文件自动检测和同步
- 工作日志自动生成（基于git commit）
- 题目质量评分系统
- 批量导出功能

## 📞 问题反馈

如有问题或建议，请在Notion页面中添加评论或联系项目负责人。
